{"ast":null,"code":"import _objectSpread from\"D:/Weebsitee/React Course/king-clothing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/Weebsitee/React Course/king-clothing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Weebsitee/React Course/king-clothing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{initializeApp}from'firebase/app';import{getAuth,signInWithRedirect,signInWithPopup,GoogleAuthProvider,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from'firebase/auth';import{getFirestore,doc,getDoc,setDoc,collection,writeBatch,query,getDocs}from'firebase/firestore';var firebaseConfig={apiKey:'AIzaSyBKf0p3XvksHWF6cPCRHJfT1Rei3zSBt9Q',authDomain:'king-clothing-db-87a3c.firebaseapp.com',projectId:'king-clothing-db-87a3c',storageBucket:'king-clothing-db-87a3c.appspot.com',messagingSenderId:'481737373669',appId:'1:481737373669:web:a7cc5e46d675953157e10c'};var firebaseApp=initializeApp(firebaseConfig);var googleProvider=new GoogleAuthProvider();googleProvider.setCustomParameters({prompt:'select_account'});export var auth=getAuth();export var signInWithGooglePopup=function signInWithGooglePopup(){return signInWithPopup(auth,googleProvider);};export var signInWithGoogleRedirect=function signInWithGoogleRedirect(){return signInWithRedirect(auth,googleProvider);};export var db=getFirestore();export var addCollectionAndDocuments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(collectionKey,objectsToAdd,field){var collectionRef,batch;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:collectionRef=collection(db,collectionKey);batch=writeBatch(db);objectsToAdd.forEach(function(object){var docRef=doc(collectionRef,object.title.toLowerCase());batch.set(docRef,object);});_context.next=5;return batch.commit();case 5:console.log('Done');case 6:case\"end\":return _context.stop();}}},_callee);}));return function addCollectionAndDocuments(_x,_x2,_x3){return _ref.apply(this,arguments);};}();export var getCategoriesAndDocuments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var collectionRef,q,querySnapShot,categoryMap;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:collectionRef=collection(db,'categories');q=query(collectionRef);_context2.next=4;return getDocs(q);case 4:querySnapShot=_context2.sent;categoryMap=querySnapShot.docs.reduce(function(acc,docSnapshot){var _docSnapshot$data=docSnapshot.data(),title=_docSnapshot$data.title,items=_docSnapshot$data.items;acc[title.toLowerCase()]=items;return acc;},{});return _context2.abrupt(\"return\",categoryMap);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getCategoriesAndDocuments(){return _ref2.apply(this,arguments);};}();export var createUserDocumentFromAuth=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(userAuth){var additionalInformation,userDocRef,userSnapshot,displayName,email,createAt,_args3=arguments;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:additionalInformation=_args3.length>1&&_args3[1]!==undefined?_args3[1]:{};if(userAuth){_context3.next=3;break;}return _context3.abrupt(\"return\");case 3:userDocRef=doc(db,'users',userAuth.uid);console.log(userDocRef);_context3.next=7;return getDoc(userDocRef);case 7:userSnapshot=_context3.sent;console.log(userSnapshot);if(userSnapshot.exists()){_context3.next=20;break;}displayName=userAuth.displayName,email=userAuth.email;createAt=new Date();_context3.prev=12;_context3.next=15;return setDoc(userDocRef,_objectSpread({displayName:displayName,email:email,createAt:createAt},additionalInformation));case 15:_context3.next=20;break;case 17:_context3.prev=17;_context3.t0=_context3[\"catch\"](12);console.log('error creating the user',_context3.t0.message);case 20:return _context3.abrupt(\"return\",userDocRef);case 21:case\"end\":return _context3.stop();}}},_callee3,null,[[12,17]]);}));return function createUserDocumentFromAuth(_x4){return _ref3.apply(this,arguments);};}();export var createAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(email,password){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(!email||!password)){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:_context4.next=4;return createUserWithEmailAndPassword(auth,email,password);case 4:return _context4.abrupt(\"return\",_context4.sent);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function createAuthUserWithEmailAndPassword(_x5,_x6){return _ref4.apply(this,arguments);};}();export var signOutUser=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return signOut(auth);case 2:return _context5.abrupt(\"return\",_context5.sent);case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function signOutUser(){return _ref5.apply(this,arguments);};}();export var signInAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(email,password){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(!email||!password)){_context6.next=2;break;}return _context6.abrupt(\"return\");case 2:_context6.next=4;return signInWithEmailAndPassword(auth,email,password);case 4:return _context6.abrupt(\"return\",_context6.sent);case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function signInAuthUserWithEmailAndPassword(_x7,_x8){return _ref6.apply(this,arguments);};}();export var onAuthStateChangedListener=function onAuthStateChangedListener(callback){return onAuthStateChanged(auth,callback);};","map":{"version":3,"names":["initializeApp","getAuth","signInWithRedirect","signInWithPopup","GoogleAuthProvider","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","doc","getDoc","setDoc","collection","writeBatch","query","getDocs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseApp","googleProvider","setCustomParameters","prompt","auth","signInWithGooglePopup","signInWithGoogleRedirect","db","addCollectionAndDocuments","collectionKey","objectsToAdd","field","collectionRef","batch","forEach","object","docRef","title","toLowerCase","set","commit","console","log","getCategoriesAndDocuments","q","querySnapShot","categoryMap","docs","reduce","acc","docSnapshot","data","items","createUserDocumentFromAuth","userAuth","additionalInformation","userDocRef","uid","userSnapshot","exists","displayName","email","createAt","Date","message","createAuthUserWithEmailAndPassword","password","signOutUser","signInAuthUserWithEmailAndPassword","onAuthStateChangedListener","callback"],"sources":["D:/Weebsitee/React Course/king-clothing/src/utils/firebase/firebase.utils.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\r\nimport {\r\n\tgetAuth,\r\n\tsignInWithRedirect,\r\n\tsignInWithPopup,\r\n\tGoogleAuthProvider,\r\n\tcreateUserWithEmailAndPassword,\r\n\tsignInWithEmailAndPassword,\r\n\tsignOut,\r\n\tonAuthStateChanged\r\n} from 'firebase/auth';\r\n\r\nimport { getFirestore, doc, getDoc, setDoc, collection, writeBatch, query, getDocs } from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n\tapiKey: 'AIzaSyBKf0p3XvksHWF6cPCRHJfT1Rei3zSBt9Q',\r\n\tauthDomain: 'king-clothing-db-87a3c.firebaseapp.com',\r\n\tprojectId: 'king-clothing-db-87a3c',\r\n\tstorageBucket: 'king-clothing-db-87a3c.appspot.com',\r\n\tmessagingSenderId: '481737373669',\r\n\tappId: '1:481737373669:web:a7cc5e46d675953157e10c'\r\n};\r\n\r\nconst firebaseApp = initializeApp(firebaseConfig);\r\n\r\nconst googleProvider = new GoogleAuthProvider();\r\ngoogleProvider.setCustomParameters({\r\n\tprompt: 'select_account'\r\n});\r\n\r\nexport const auth = getAuth();\r\nexport const signInWithGooglePopup = () => signInWithPopup(auth, googleProvider);\r\nexport const signInWithGoogleRedirect = () => signInWithRedirect(auth, googleProvider);\r\n\r\nexport const db = getFirestore();\r\n\r\nexport const addCollectionAndDocuments = async (collectionKey, objectsToAdd, field) => {\r\n\tconst collectionRef = collection(db, collectionKey);\r\n\tconst batch = writeBatch(db);\r\n\r\n\tobjectsToAdd.forEach((object) => {\r\n\t\tconst docRef = doc(collectionRef, object.title.toLowerCase());\r\n\t\tbatch.set(docRef, object);\r\n\t});\r\n\r\n\tawait batch.commit();\r\n\tconsole.log('Done');\r\n};\r\n\r\nexport const getCategoriesAndDocuments = async () => {\r\n\tconst collectionRef = collection(db, 'categories');\r\n\tconst q = query(collectionRef);\r\n\r\n\tconst querySnapShot = await getDocs(q);\r\n\tconst categoryMap = querySnapShot.docs.reduce((acc, docSnapshot) => {\r\n\t\tconst { title, items } = docSnapshot.data();\r\n\t\tacc[title.toLowerCase()] = items;\r\n\t\treturn acc;\r\n\t}, {});\r\n\r\n\treturn categoryMap;\r\n};\r\n\r\nexport const createUserDocumentFromAuth = async (userAuth, additionalInformation = {}) => {\r\n\tif (!userAuth) return;\r\n\tconst userDocRef = doc(db, 'users', userAuth.uid);\r\n\r\n\tconsole.log(userDocRef);\r\n\r\n\tconst userSnapshot = await getDoc(userDocRef);\r\n\tconsole.log(userSnapshot);\r\n\r\n\tif (!userSnapshot.exists()) {\r\n\t\tconst { displayName, email } = userAuth;\r\n\t\tconst createAt = new Date();\r\n\r\n\t\ttry {\r\n\t\t\tawait setDoc(userDocRef, {\r\n\t\t\t\tdisplayName,\r\n\t\t\t\temail,\r\n\t\t\t\tcreateAt,\r\n\t\t\t\t...additionalInformation\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('error creating the user', error.message);\r\n\t\t}\r\n\t}\r\n\r\n\treturn userDocRef;\r\n};\r\n\r\nexport const createAuthUserWithEmailAndPassword = async (email, password) => {\r\n\tif (!email || !password) return;\r\n\r\n\treturn await createUserWithEmailAndPassword(auth, email, password);\r\n};\r\n\r\nexport const signOutUser = async () => await signOut(auth);\r\n\r\nexport const signInAuthUserWithEmailAndPassword = async (email, password) => {\r\n\tif (!email || !password) return;\r\n\r\n\treturn await signInWithEmailAndPassword(auth, email, password);\r\n};\r\n\r\nexport const onAuthStateChangedListener = (callback) => onAuthStateChanged(auth, callback);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}